/*
 * Copyright (c) 2020 The ZMK Contributors
 * test
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>

//
// ---------- KBD8X key switch positions ----------
//
// -------------------------------------------------------------------------------------------
// | 0  |    | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  |    | 9  | 10 | 11 | 12 | 13 | 14 | 15 |
// -------------------------------------------------------------------------------------------
// | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 31 | 32 | 33 |
// -------------------------------------------------------------------------------------------
// | 34 | 35 | 36 | 37 | 38 | 39 | 40 | 41 | 42 | 43 | 44 | 45 | 46 | 47 | 48 | 49 | 50 | 51 |
// -------------------------------------------------------------------------------------------
// | 52 | 53 | 54 | 55 | 56 | 57 | 58 | 59 | 60 | 61 | 62 | 63 | 64 | 65 | 66 |    |    |    |
// -------------------------------------------------------------------------------------------
// | 67 | 68 | 69 | 70 | 71 | 72 | 73 | 74 | 75 | 76 | 77 | 78 | 79 | 80 | 81 |    | 82 |    |
// -------------------------------------------------------------------------------------------
// | 83 | 84 | 85 | 86 | 87 | 88 | 89 | 90 | 91 | 92 | 93 | 94 | 95 | 96 | 97 | 98 | 99 | 100|
// -------------------------------------------------------------------------------------------
//

/ {
    behaviors {
        hm: homerow_mods {
            compatible = "zmk,behavior-hold-tap";
            label = "HOMEROW_MODS";
            #binding-cells = <2>;
            tapping-term-ms = <300>;    // <---[[moderate duration]]
            quick-tap-ms = <0>;
            flavor = "balanced";
            bindings = <&kp>, <&kp>;
        };
    };

    combos {
        compatible = "zmk,combos";

        // BACKSPACE + LCTRL + LALT = &sys_reset
        combo_bootloader {
            timeout-ms = <100>;
            key-positions = <30 83 85>;
            bindings = <&sys_reset>;
        };

        // RETURN + LCTRL + LALT = &bootloader
        combo_sys_reset {
            timeout-ms = <100>;
            key-positions = <81 83 85>;
            bindings = <&bootloader>;
        };
    };

    keymap {
        compatible = "zmk,keymap";

        base {

// --------- Default QWERTY Layout ---------
// Layer 0 BASE
// --------------------------------------------------------------------------------------------------------------
// | ESC |     | F1  | F2  | F3  | F4  | F5  | F6  | F7  | F8  |     | F9  | F10 | F11 | F12 |PrtSc|Scrll| Pause|
// --------------------------------------------------------------------------------------------------------------
// |  ~  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  |  0  |  รท  |  ร  |  -  | Bspc| Ins | Home| PgUp |
// --------------------------------------------------------------------------------------------------------------
// | TAB |  Q  |  W  |  E  |  R  |  T  |  Y  |  U  |  I  |  O  |  P  | N7  | N8  | N9  |  \  | Del | End | PgDn |
// --------------------------------------------------------------------------------------------------------------
// | Fn1 |  A  |  S  |  D  |  F  |  G  |  H  |  J  |  K  |  L  |  ;  | N4  | N5  | N6  |  +  |                  |
// --------------------------------------------------------------------------------------------------------------
// |LSHFT|  Z  |  X  |  C  |  V  |  B  |  N  |  M  |  ,  |  .  |  /  | N1  | N2  | N3  |Enter|     | Up  |      |
// --------------------------------------------------------------------------------------------------------------
// | LCTL| LGUI| LALT| Fn2 | Fn3 | Spc | Bspc|  '  | Fn4 | RALT| RGUI| N0  | N00 | N.  |RCTRL| Left| Down| Right|
// --------------------------------------------------------------------------------------------------------------


            bindings = <
&kp ESC              &kp F1    &kp F2     &kp F3     &kp F4     &kp F5    &kp F6   &kp F7     &kp F8              &kp F9        &kp F10          &kp F11       &kp F12      &kp PSCRN  &kp SLCK  &kp PAUSE_BREAK
&kp TILDE  &kp N1    &kp N2    &kp N3     &kp N4     &kp N5     &kp N6    &kp N7   &kp N8     &kp N9    &kp N0    &kp KP_SLASH  &kp KP_MULTIPLY  &kp KP_MINUS  &kp BSPC     &kp INS    &kp HOME  &kp PG_UP
&kp TAB    &kp Q     &kp W     &kp E      &kp R      &kp T      &kp Y     &kp U    &kp I      &kp O     &kp P     &kp KP_N7     &kp KP_N8        &kp KP_N9     &kp BSLH     &kp DEL    &kp END   &kp PG_DN
&mo 1      &kp A     &kp S     &kp D      &kp F      &kp G      &kp H     &kp J    &kp K      &kp L     &kp SEMI  &kp KP_N4     &kp KP_N5        &kp KP_N6     &kp KP_PLUS
&kp LSHFT  &kp Z     &kp X     &kp C      &kp V      &kp B      &kp N     &kp M    &kp COMMA  &kp DOT   &kp FSLH  &kp KP_N1     &kp KP_N2        &kp KP_N3     &kp ENTER               &kp UP
&kp LCTRL  &kp LGUI  &kp LALT  &mo 2      &mo 3      &kp SPACE  &lt BSPC  &kp SQT  &mo 4      &kp RALT  &kp RGUI  &kp KP_N0     &kp KP_N0        &kp KP_DOT    &kp RCTRL    &kp LEFT   &kp DOWN  &kp RIGHT
            >;
            sensor-bindings = <&inc_dec_kp C_VOL_DN C_VOL_UP>;
        };

        func1 {
// Layer 1 FUNC1
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     | PgUp| PgDn| Pscr|     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// | Fn1 |     |     | Home| End |Pause|     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     | Ins | Del | Slck|     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
            bindings = <
&trans  &trans     &trans    &trans     &trans     &trans           &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans     &trans    &trans     &trans     &trans           &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans     &trans    &kp PG_UP  &kp PG_DN  &kp PSCRN        &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans     &trans    &kp HOME   &kp END    &kp PAUSE_BREAK  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans     &trans    &kp INS    &kp DEL    &kp SLCK         &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans          &trans
&trans  &trans     &trans    &trans     &trans     &trans           &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
            >;
        };

        func2 {
// Layer 2 FUNC2
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     | Fn2 |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
            bindings = <
&trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans          &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
            >;
        };

        func3 {
// Layer 3 FUNC3
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |  `  |     |  _  |  +  |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |  {  |  }  |  -  |  =  |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |  [  |  ]  |  (  |  )  |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     | Fn3 |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
            bindings = <
&trans  &trans     &trans    &trans     &trans     &trans   &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans     &trans    &trans     &trans     &trans   &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &kp GRAVE  &trans    &kp UNDER  &kp PLUS   &trans   &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &kp LBRC   &kp RBRC  &kp MINUS  &kp EQUAL  &trans   &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &kp LBKT   &kp RBKT  &kp LPAR   &kp RPAR   &trans   &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans          &trans
&trans  &trans     &trans    &trans     &trans     &trans   &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
            >;
        };

        func4 {
// Layer 4 FUNC4
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |Rewnd| Vol+|FstFr|     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     | Prev| Vol-| Next|     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     |      |
// --------------------------------------------------------------------------------------------------------------
// |     |     |     |     |     |     | Play| Mute|     |     |     |     |     |     |     |     |      |     |
// --------------------------------------------------------------------------------------------------------------
            bindings = <
&trans  &trans  &trans  &trans  &trans  &trans  &trans    &trans      &trans        &trans       &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans    &trans      &trans        &trans       &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans    &kp C_RW    &kp C_VOL_UP  &kp C_FF     &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans    &kp C_PREV  &kp C_VOL_DN  &kp C_NEXT   &trans  &trans  &trans  &trans  &trans
&trans  &trans  &trans  &trans  &trans  &trans  &trans    &trans      &trans        &trans       &trans  &trans  &trans  &trans  &trans          &trans
&trans  &trans  &trans  &trans  &trans  &trans  &kp C_PP  &kp C_MUTE  &trans        &trans       &trans  &trans  &trans  &trans  &trans  &trans  &trans  &trans
            >;
        };
    };
};
